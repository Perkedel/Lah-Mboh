// Oke here we go
// (JOELwindows7)

class LevelSelectNow
{
	static void doLevelSelectNow(){
		// https://zdoom.org/wiki/ActivateMenu
		// https://zdoom.org/wiki/SetMenu
		//let levelMenu = new("LevelSelectNowMenu");
		//levelMenu.init(Menu.currentMenu());
		//levelMenu.activateMenu();
		
		Menu.setMenu("LevelSelectNowMenu");
	}
}

class LevelSelectNowHandler : LMBH_ZF_Handler
{
	LevelSelectNowMenu link;
	
	override void buttonClickCommand(LMBH_ZF_Button caller, Name command)
	{
		// pls why switch case only numbers not string?! Don't make me look like that guy.
		// https://zdoom.org/wiki/ChangeLevel_(ZScript)
		if(command == "L-JUSTFITE"){
			console.printf("GO to JUSTFITE");
			//CallACS("ChangeLevel","JUSTFITE",0, CHANGELEVEL_NOINTERMISSION);
			//ACS_NamedExecute("LevelJustfite",0);
			//CallACS("LevelJustfite");
			Level.ChangeLevel("JUSTFITE",0,CHANGELEVEL_NOINTERMISSION,-1);
			//Destroy();
			//Close();
			link.Close();
		}
		else if(command == "L-RIGHTFRN"){
			console.printf("GO to RIGHTFRN");
			//CallACS("LevelRightFrn");
			Level.ChangeLevel("RIGHTFRN",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-MBHADV"){
			console.printf("GO to Megawad Mboh Adventure");
			//CallACS("MegawadMBHADV");
			Level.ChangeLevel("MBH01",0,CHANGELEVEL_NOINTERMISSION | CHANGELEVEL_RESETINVENTORY | CHANGELEVEL_RESETHEALTH,-1);
			link.Close();
		}
		else if(command == "L-PLMSKY1"){
			console.printf("GO to PLMSKY1");
			//CallACS("LevelPlmSky1");
			Level.ChangeLevel("PLMSKY1",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-MECHSKY1"){
			console.printf("GO to MECHSKY1");
			//CallACS("LevelMechSky1");
			Level.ChangeLevel("MECHSKY1",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-CHORALBE"){
			console.printf("GO to Choral Bae");
			//CallACS("LevelChoralBe");
			Level.ChangeLevel("CHORALBE",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-FREELD"){
			console.printf("GO to Freeloader hell");
			Level.ChangeLevel("FREELD",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-TELEFAST"){
			console.printf("GO to Telefast demo");
			Level.ChangeLevel("TELEFAST",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-DONUTER"){
			console.printf("GO to Floor Donut demo");
			Level.ChangeLevel("DONUTER",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-PORTALA"){
			console.printf("GO to Portal Sector demo");
			Level.ChangeLevel("PORTALA",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-TOTITLE"){
			Level.ChangeLevel("TOTITLE",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-TOTITLE2"){
			Level.ChangeLevel("TOTITLE2",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-TOTITLE3"){
			Level.ChangeLevel("TOTITLE3",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-MORATE"){
			Level.ChangeLevel("MORATE",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-DODTEL"){
			Level.ChangeLevel("DODTEL",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-T_SCTTG"){
			Level.ChangeLevel("T_SCTTG",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-T_CUZOM"){
			Level.ChangeLevel("T_CUZOM",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}
		else if(command == "L-SELDUAR"){
			Level.ChangeLevel("SELDUAR",0,CHANGELEVEL_NOINTERMISSION,-1);
			link.Close();
		}

		else
		{
			console.printf("GO to %s", command);
			// if command preceded by `L-` then call acs of that thing there!
		}
	}
}

class LevelSelectNowMenu : LMBH_ZF_GenericMenu 
{
	LMBH_ZF_ListFrame liste;
	LMBH_ZF_Image background;
	Font smallFont;
	
	override void init (Menu parent)
	{
		LevelSelectNowHandler handler;
		
		Vector2 baseRes = (320, 200);
		Super.init(parent);
		SetBaseResolution (baseRes);
		
		 // Get GZDoom's new options menu smallfont.
        smallFont = OptionFont ();
		
		handler = new ('LevelSelectNowHandler');
		handler.link = self;
		
		LMBH_ZF_Element elem;
		
		double daHeight = 256+128+128;
		// Add a background.
        background = LMBH_ZF_Image.Create
        (
            // Position
            (0, 0),
            // Size
            (320, 200),
            // Image path/name
            "graphics/ZFormsExamples/Panel.png",
            // Alignment options
            LMBH_ZF_Image.AlignType_TopLeft
        );
        // Add the image element into the main frame.
        background.Pack (mainFrame);
        
         // Create the box image's textures.
        let boxTexture = LMBH_ZF_BoxTextures.CreateTexturePixels
        (
            // The texture itself.
            "graphics/Box8x8.png",
            // The top-left corner of the middle of the box.
            (2, 2),
            // The bottom-right corner of the middle of the box.
            (6, 6),
            // Whether to scale (true) or tile (false) the sides.
            false,
            // Whether to scale (true) or tile (false) the middle.
            false
        );
        
        //Scrollact Jmodded
        let scrollactContainer = LMBH_ZF_ScrollContainer.Create(
        	(0,32),
        	(320,190-32),
        	8,	
        	daHeight,
        	32,
        	boxTexture
        );
        scrollactContainer.Pack(mainFrame);
        let scrollactFrame = LMBH_ZF_Frame(scrollactContainer.GetScrollArea());
        
        
        // Textoid
        elem = LMBH_ZF_Label.create(
        	(8,16),
        	(128,16),
        	StringTable.Localize("$GOTOLEVELSAY"),
        	smallFont
        );
        elem.Pack(mainFrame);
        
        // list
        liste = LMBH_ZF_ListFrame.create(
        	(0,0),
        	(320,daHeight),
        	4	
        );
        liste.Pack(scrollactFrame);
        
        //Level now
        elem = LMBH_ZF_Button.create(
        	(8,16),
        	(96,32),
        	text: String.Format("(MEGAWAD) %s", StringTable.Localize("$MBOHADV")),
        	cmdHandler: handler,
        	command: "L-MBHADV"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,24),
        	(96,16),
        	text: StringTable.Localize("$JUSTFITE"),
        	cmdHandler: handler,
        	command: "L-JUSTFITE"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,32),
        	(100,16),
        	text: StringTable.Localize("$RIGHTFRN"),
        	cmdHandler: handler,
        	command: "L-RIGHTFRN"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,40),
        	(100,16),
        	text: StringTable.Localize("$PLMSKY1"),
        	cmdHandler: handler,
        	command: "L-PLMSKY1"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,48),
        	(100,16),
        	text: StringTable.Localize("$MECHSKY1"),
        	cmdHandler: handler,
        	command: "L-MECHSKY1"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,56),
        	(100,16),
        	text: StringTable.Localize("$CHORALBE"),
        	cmdHandler: handler,
        	command: "L-CHORALBE"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,64),
        	(100,16),
        	text: StringTable.Localize("$FREELD"),
        	cmdHandler: handler,
        	command: "L-FREELD"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,72),
        	(100,16),
        	text: StringTable.Localize("$TELEFAST"),
        	cmdHandler: handler,
        	command: "L-TELEFAST"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,72),
        	(100,24),
        	text: StringTable.Localize("$DONUTER"),
        	cmdHandler: handler,
        	command: "L-DONUTER"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,80),
        	(100,32),
        	text: StringTable.Localize("$PORTALA"),
        	cmdHandler: handler,
        	command: "L-PORTALA"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,88),
        	(100,32),
        	text: StringTable.Localize("$TOTITLE"),
        	cmdHandler: handler,
        	command: "L-TOTITLE"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,96),
        	(100,32),
        	text: StringTable.Localize("$TOTITLE2"),
        	cmdHandler: handler,
        	command: "L-TOTITLE2"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,104),
        	(100,32),
        	text: StringTable.Localize("$MORATE"),
        	cmdHandler: handler,
        	command: "L-MORATE"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,112),
        	(100,32),
        	text: StringTable.Localize("$DODTEL"),
        	cmdHandler: handler,
        	command: "L-DODTEL"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,120),
        	(100,32),
        	text: StringTable.Localize("$T_SCTTG"),
        	cmdHandler: handler,
        	command: "L-T_SCTTG"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
        
        elem = LMBH_ZF_Button.create(
        	(8,128),
        	(100,32),
        	text: StringTable.Localize("$T_CUZOM"),
        	cmdHandler: handler,
        	command: "L-T_CUZOM"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);

		elem = LMBH_ZF_Button.create(
        	(8,136),
        	(100,32),
        	text: StringTable.Localize("$TOTITLE3"),
        	cmdHandler: handler,
        	command: "L-TOTITLE3"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);

		elem = LMBH_ZF_Button.create(
        	(8,144),
        	(100,32),
        	//text: StringTable.Localize("$SELDUAR"),
			text: String.Format("(DM) %s", StringTable.Localize("$SELDUAR")),
        	cmdHandler: handler,
        	command: "L-SELDUAR"
        );
        //elem.Pack(scrollactFrame);
        elem.Pack(liste);
	}
}